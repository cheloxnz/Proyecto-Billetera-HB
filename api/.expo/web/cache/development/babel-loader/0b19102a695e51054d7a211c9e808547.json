{"ast":null,"code":"var server = require('express').Router();\n\nvar _require = require(\"../db.js\"),\n    Account = _require.Account,\n    Transaction = _require.Transaction;\n\nserver.get(\"/\", function (req, res) {\n  Account.findAll().then(function (data) {\n    res.send(data).status(200);\n  }).catch(function (err) {\n    return console.log(err);\n  });\n});\nserver.get(\"/:id\", function (req, res) {\n  Account.findOne({\n    where: {\n      userId: req.params.id\n    }\n  }).then(function (data) {\n    res.send(data).status(200);\n  }).catch(function (err) {\n    console.log(\"Error\", err);\n  });\n});\nserver.delete(\"/:id\", function (req, res) {\n  Account.findOne({\n    where: {\n      userId: req.params.id\n    }\n  }).then(function (data) {\n    var deleteAccount = data;\n    data.destroy();\n    res.send(deleteAccount).status(200);\n  }).catch(function (err) {\n    console.log(err);\n  });\n});\nserver.post(\"/\", function (req, res) {\n  Account.create(req.body).then(function (data) {\n    res.send(data).status(201);\n  }).catch(function (err) {\n    console.log(err);\n  });\n});\nmodule.exports = server;","map":{"version":3,"sources":["/home/matias/Documentos/Henry/Proyecto-Henry-Bank/api/src/routes/accounts.js"],"names":["server","require","Router","Account","Transaction","get","req","res","findAll","then","data","send","status","catch","err","console","log","findOne","where","userId","params","id","delete","deleteAccount","destroy","post","create","body","module","exports"],"mappings":"AAAA,IAAMA,MAAM,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBC,MAAnB,EAAf;;eACiCD,OAAO,Y;IAAhCE,O,YAAAA,O;IAASC,W,YAAAA,W;;AAOjBJ,MAAM,CAACK,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1BJ,EAAAA,OAAO,CAACK,OAAR,GACCC,IADD,CACM,UAAAC,IAAI,EAAI;AACVH,IAAAA,GAAG,CAACI,IAAJ,CAASD,IAAT,EAAeE,MAAf,CAAsB,GAAtB;AACH,GAHD,EAGGC,KAHH,CAGS,UAAAC,GAAG;AAAA,WAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,GAHZ;AAIH,CALD;AAWAd,MAAM,CAACK,GAAP,CAAW,MAAX,EAAmB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC7BJ,EAAAA,OAAO,CAACc,OAAR,CAAgB;AACZC,IAAAA,KAAK,EAAE;AACHC,MAAAA,MAAM,EAAEb,GAAG,CAACc,MAAJ,CAAWC;AADhB;AADK,GAAhB,EAIGZ,IAJH,CAIQ,UAAAC,IAAI,EAAI;AACZH,IAAAA,GAAG,CAACI,IAAJ,CAASD,IAAT,EAAeE,MAAf,CAAsB,GAAtB;AACH,GAND,EAMGC,KANH,CAMS,UAAAC,GAAG,EAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,GAArB;AACH,GARD;AASH,CAVD;AAgBAd,MAAM,CAACsB,MAAP,CAAc,MAAd,EAAsB,UAAChB,GAAD,EAAMC,GAAN,EAAc;AAChCJ,EAAAA,OAAO,CAACc,OAAR,CAAgB;AACZC,IAAAA,KAAK,EAAE;AACHC,MAAAA,MAAM,EAAEb,GAAG,CAACc,MAAJ,CAAWC;AADhB;AADK,GAAhB,EAIGZ,IAJH,CAIQ,UAASC,IAAT,EAAc;AAClB,QAAMa,aAAa,GAAGb,IAAtB;AACAA,IAAAA,IAAI,CAACc,OAAL;AACAjB,IAAAA,GAAG,CAACI,IAAJ,CAASY,aAAT,EAAwBX,MAAxB,CAA+B,GAA/B;AACH,GARD,EAQGC,KARH,CAQS,UAAAC,GAAG,EAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,GAVD;AAWH,CAZD;AAkBAd,MAAM,CAACyB,IAAP,CAAY,GAAZ,EAAiB,UAACnB,GAAD,EAAMC,GAAN,EAAc;AAC3BJ,EAAAA,OAAO,CAACuB,MAAR,CAAepB,GAAG,CAACqB,IAAnB,EAAyBlB,IAAzB,CAA8B,UAAAC,IAAI,EAAI;AAClCH,IAAAA,GAAG,CAACI,IAAJ,CAASD,IAAT,EAAeE,MAAf,CAAsB,GAAtB;AACH,GAFD,EAEGC,KAFH,CAES,UAAAC,GAAG,EAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,GAJD;AAKH,CAND;AAQAc,MAAM,CAACC,OAAP,GAAiB7B,MAAjB","sourcesContent":["const server = require('express').Router();\nconst { Account, Transaction } = require('../db.js');\n\n\n//-------------------------------------\n//                GET ALL             |\n//-------------------------------------\n\nserver.get(\"/\", (req, res) => {\n    Account.findAll()\n    .then(data => { \n        res.send(data).status(200)\n    }).catch(err => console.log(err))\n})\n\n//-------------------------------------\n//                GET BY ID           |\n//-------------------------------------\n\nserver.get(\"/:id\", (req, res) => {\n    Account.findOne({\n        where: {\n            userId: req.params.id\n        }\n    }).then(data => {\n        res.send(data).status(200)\n    }).catch(err => {\n        console.log(\"Error\", err)\n    })\n})\n\n//-------------------------------------\n//               DELETE BY ID         |\n//-------------------------------------\n\nserver.delete(\"/:id\", (req, res) => {\n    Account.findOne({\n        where: {\n            userId: req.params.id\n        }\n    }).then(function(data){\n        const deleteAccount = data\n        data.destroy()\n        res.send(deleteAccount).status(200)\n    }).catch(err => {\n        console.log(err)\n    })\n})\n\n//-------------------------------------\n//          POST ALL ACCOUNTS         |\n//-------------------------------------\n\nserver.post(\"/\", (req, res) => {\n    Account.create(req.body).then(data => {\n        res.send(data).status(201)    \n    }).catch(err => {\n        console.log(err)\n    })\n})\n\nmodule.exports = server;"]},"metadata":{},"sourceType":"script"}